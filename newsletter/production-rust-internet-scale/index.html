<!doctype html><html lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=#ff6b35 name=theme-color><meta content=#ff6b35 name=msapplication-TileColor><meta content=yes name=apple-mobile-web-app-capable><meta content=black-translucent name=apple-mobile-web-app-status-bar-style><meta content=en name=language><meta content="Bob Peters" name=author><meta content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1" name=robots><link href=//fonts.googleapis.com rel=dns-prefetch><link href=//www.googletagmanager.com rel=dns-prefetch><title>
         71 - Production Rust at Internet Scale
        
    </title><meta content="71 - Production Rust at Internet Scale" property=og:title><meta content="Cloudflare's 90M req/sec with Pingora, the ecosystem maintenance debate that shook Reddit, and why your mutex choice matters more than you think." property=og:description><meta content="Cloudflare's 90M req/sec with Pingora, the ecosystem maintenance debate that shook Reddit, and why your mutex choice matters more than you think." name=description><link href=https://rust-trends.com/icon/favicon.ico rel=icon type=image/x-icon><link href=https://rust-trends.com/icon/favicon.ico rel=apple-touch-icon sizes=180x180><link href=https://rust-trends.com/icon/favicon.ico rel=apple-touch-icon sizes=152x152><link href=https://rust-trends.com/icon/favicon.ico rel=apple-touch-icon sizes=144x144><link href=https://rust-trends.com/icon/favicon.ico rel=apple-touch-icon sizes=120x120><link href=https://rust-trends.com/icon/favicon.ico rel=apple-touch-icon sizes=114x114><link href=https://rust-trends.com/icon/favicon.ico rel=apple-touch-icon sizes=76x76><link href=https://rust-trends.com/icon/favicon.ico rel=apple-touch-icon sizes=72x72><link href=https://rust-trends.com/icon/favicon.ico rel=apple-touch-icon sizes=60x60><link href=https://rust-trends.com/icon/favicon.ico rel=apple-touch-icon sizes=57x57><link href=https://rust-trends.com/icon/favicon.ico rel=apple-touch-icon><link href=https://cdn.jsdelivr.net/npm/jetbrains-mono@1.0.6/css/jetbrains-mono.min.css rel=stylesheet><link href=https://cdn.jsdelivr.net/npm/@fontsource/space-grotesk@4.5.8/index.min.css rel=stylesheet><link title="Rust Trends" href=https://rust-trends.com/atom.xml rel=alternate type=application/atom+xml><link href=https://rust-trends.com/newsletter/production-rust-internet-scale/ rel=canonical><meta content=summary_large_image name=twitter:card><meta content=@rust_trends name=twitter:site><meta content=@bob_peters name=twitter:creator><meta content="71 - Production Rust at Internet Scale" name=twitter:title><meta content="Cloudflare's 90M req/sec with Pingora, the ecosystem maintenance debate that shook Reddit, and why your mutex choice matters more than you think." name=twitter:description><meta content=https://rust-trends.com/icon/favicon.ico property=og:image><meta content=https://rust-trends.com/icon/favicon.ico name=twitter:image><meta content=article property=og:type><meta content=https://rust-trends.com/newsletter/production-rust-internet-scale/ property=og:url><meta content="Rust Trends" property=og:site_name><meta content=2025-11-02 property=article:published_time><meta content=Newsletter property=article:section><link href=https://rust-trends.com/main.css media=screen rel=stylesheet><script type=application/ld+json>
{
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": "Rust Trends",
  "url": "https:&#x2F;&#x2F;rust-trends.com",
  "logo": "https:&#x2F;&#x2F;rust-trends.com/icon/favicon.ico",
  "description": "The premier newsletter and resource for Rust programming trends, tutorials, and ecosystem updates.",
  "foundingDate": "2022",
  "founder": {
    "@type": "Person",
    "name": "Bob Peters"
  },
  "sameAs": [
    "https:&#x2F;&#x2F;www.linkedin.com&#x2F;company&#x2F;rust-trends","https:&#x2F;&#x2F;github.com&#x2F;rust-trends&#x2F;"
  ],
  "contactPoint": {
    "@type": "ContactPoint",
    "contactType": "customer support",
    "url": "https:&#x2F;&#x2F;rust-trends.com/contact"
  }
}
</script><script type=application/ld+json>
{
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": "Rust Trends",
  "url": "https:&#x2F;&#x2F;rust-trends.com",
  "description": "The premier newsletter and resource for Rust programming trends, tutorials, and ecosystem updates.",
  "potentialAction": {
    "@type": "SearchAction",
    "target": "https:&#x2F;&#x2F;rust-trends.com/search?q={search_term_string}",
    "query-input": "required name=search_term_string"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Rust Trends",
    "url": "https:&#x2F;&#x2F;rust-trends.com"
  }
}
</script><script type=application/ld+json>
{
  "@context": "https://schema.org",
  "@type": "Article",
  "headline": "71 - Production Rust at Internet Scale",
  "author": {
    "@type": "Person",
    "name": "Bob Peters",
    "url": "https:&#x2F;&#x2F;rust-trends.com/about",
    "sameAs": [
      "https:&#x2F;&#x2F;www.linkedin.com&#x2F;company&#x2F;rust-trends",
      "https:&#x2F;&#x2F;github.com&#x2F;rust-trends&#x2F;"
    ]
  },
  "publisher": {
    "@type": "Organization",
    "name": "Rust Trends",
    "url": "https:&#x2F;&#x2F;rust-trends.com",
    "logo": {
      "@type": "ImageObject",
      "url": "https:&#x2F;&#x2F;rust-trends.com/icon/favicon.ico"
    }
  },
  "datePublished": "2025-11-02",
  "dateModified": "2025-11-02",
  "description": "Cloudflare&#x27;s 90M req&#x2F;sec with Pingora, the ecosystem maintenance debate that shook Reddit, and why your mutex choice matters more than you think.",
  "url": "https:&#x2F;&#x2F;rust-trends.com&#x2F;newsletter&#x2F;production-rust-internet-scale&#x2F;",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https:&#x2F;&#x2F;rust-trends.com&#x2F;newsletter&#x2F;production-rust-internet-scale&#x2F;"
  },
  
  "articleSection": "Newsletter",
  "inLanguage": "en-US"
}
</script><script type=application/ld+json>
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "https:&#x2F;&#x2F;rust-trends.com"
    },
    
    {
      "@type": "ListItem",
      "position": 2,
      "name": "Newsletter",
      "item": "https:&#x2F;&#x2F;rust-trends.com/newsletter"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "71 - Production Rust at Internet Scale",
      "item": "https:&#x2F;&#x2F;rust-trends.com&#x2F;newsletter&#x2F;production-rust-internet-scale&#x2F;"
    }
    
  ]
}
</script></head><script src="https://www.googletagmanager.com/gtag/js?id=G-FWPL9RWX77" async></script><script>window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-FWPL9RWX77');</script><body><div class=content><header><div class=main><a href=https://rust-trends.com>Rust Trends</a><div class=socials><a class=social href=https://www.linkedin.com/company/rust-trends rel=me> <img alt=linkedin src=/social_icons/linkedin.svg> </a><a class=social href=https://github.com/rust-trends/ rel=me> <img alt=github src=/social_icons/github.svg> </a></div></div><nav>Â Â <a href=/newsletter/ style=margin-left:.7em>/newsletter</a> Â Â <a href=/posts/ style=margin-left:.7em>/posts</a> Â Â <a href=/search/ style=margin-left:.7em>/search</a> Â Â <a href=/faq/ style=margin-left:.7em>/faq</a> Â Â <a href=/about/ style=margin-left:.7em>/about</a> Â Â <a href=/contact/ style=margin-left:.7em>/contact</a> Â Â <a href=/signup/ style=margin-left:.7em>/sign up</a></nav></header><script type=application/ld+json>
{
  "@context": "https://schema.org",
  "@type": "Newsletter",
  "name": "71 - Production Rust at Internet Scale",
  "description": "Cloudflare&#x27;s 90M req&#x2F;sec with Pingora, the ecosystem maintenance debate that shook Reddit, and why your mutex choice matters more than you think.",
  "url": "https:&#x2F;&#x2F;rust-trends.com&#x2F;newsletter&#x2F;production-rust-internet-scale&#x2F;",
  "datePublished": "2025-11-02",
  "author": {
    "@type": "Person",
    "name": "Bob Peters",
    "url": "https:&#x2F;&#x2F;rust-trends.com/about"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Rust Trends",
    "url": "https:&#x2F;&#x2F;rust-trends.com"
  },
  "inLanguage": "en-US",
  "isPartOf": {
    "@type": "PeriodicalSeries",
    "name": "Rust Trends Newsletter",
    "description": "Weekly newsletter covering Rust programming trends, tutorials, and ecosystem updates"
  }
}
</script><script type=application/ld+json>
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "https:&#x2F;&#x2F;rust-trends.com"
    },
    
    {
      "@type": "ListItem",
      "position": 2,
      "name": "Newsletter",
      "item": "https:&#x2F;&#x2F;rust-trends.com/newsletter"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "71 - Production Rust at Internet Scale",
      "item": "https:&#x2F;&#x2F;rust-trends.com&#x2F;newsletter&#x2F;production-rust-internet-scale&#x2F;"
    }
    
  ]
}
</script><nav aria-label=Breadcrumb class=breadcrumb><ol class=breadcrumb-list><li class=breadcrumb-item><a href=https://rust-trends.com>Home</a><li class=breadcrumb-item><a href=https://rust-trends.com/newsletter>Newsletter</a><li class="breadcrumb-item current" aria-current=page>71 - Production Rust at Internet Scale</ol></nav><main><article><div class=title><div class=page-header>71 - Production Rust at Internet Scale<span class=primary-color style=font-size:1.6em>.</span></div><div class=meta>Posted on <time>2025-11-02</time></div></div><section class=body><p>Here's a question worth pondering: when is "unmaintained" not actually a problem?<p>This week, a frustrated developer sparked one of the most honest conversations about Rust's ecosystem maturity I've seen in months. Their concern? Too many crates haven't been touched in years, maintained by solo developers, while competitors like Go have corporate-backed libraries. The community's response revealed something fascinating about how Rust code ages differently.<p>Meanwhile, Cloudflare is proving that production Rust isn't just ready it's rewriting the rules. They're handling 90 million requests per second with 70% less CPU than nginx. And if you've ever wondered whether choosing between <code>std::sync::Mutex</code> and <code>parking_lot</code> actually matters, new benchmarks show the performance gap is way more nuanced than "just use parking_lot."<p>From internet-scale infrastructure to the hidden complexities of diagnostic rendering, this edition dives deep into what it really means to ship Rust in production.<p>Let's get into it.<h1 id=how-cloudflare-handles-90-million-requests-per-second-with-rust>How Cloudflare Handles 90 Million Requests Per Second with Rust</h1><p>Ever wondered what it takes to handle a quarter of the internet's traffic? In a recent <a href=https://corrode.dev/podcast/s05e03-cloudflare/ target=_blank>Rust in Production podcast episode</a>, Cloudflare engineers Edward Wang and Kevin Guthrie share how they replaced nginx with <a href=https://github.com/cloudflare/pingora target=_blank>Pingora</a>, their Rust-based HTTP proxy.<p>The numbers are striking: 90 million requests per second with <strong>70% less CPU</strong> and <strong>67% less memory</strong> compared to their nginx infrastructure. The key? Moving from multi-process to multi-threaded architecture, enabled by Rust's memory safety guarantees.<h2 id=why-it-works>Why It Works</h2><p>nginx's process-based model couldn't share connections efficiently at Cloudflare's scale. Pingora leverages <a href=https://tokio.rs target=_blank>Tokio</a> for async operations and integrates <a href=https://github.com/rustls/rustls target=_blank>Rustls</a> for TLS. The result: 5ms faster median TTFB and better resource utilization across hundreds of data centers.<p>Cloudflare open-sourced <a href=https://github.com/cloudflare/shellflip target=_blank>shellflip</a> for graceful process restarts and uses <a href=https://github.com/xacrimon/dashmap target=_blank>DashMap</a> for high-performance concurrent operations. They also built custom tooling for logging and metrics, critical when running Rust at internet scale.<h2 id=the-community-impact>The Community Impact</h2><p>While Pingora is a framework requiring code, <a href=https://www.memorysafety.org/blog/introducing-river/ target=_blank>River</a> a collaboration between Prossimo, Cloudflare, Shopify, and Chainguard, aims to be a ready-to-run nginx replacement with load balancing, KDL configuration, and WASM scriptability.<p>The takeaway? Async Rust handles internet-scale workloads, memory safety enables confident refactoring, and open sourcing core infrastructure elevates the entire ecosystem. If you're building network services in Rust, this <a href=https://corrode.dev/podcast/s05e03-cloudflare/ target=_blank>episode</a> is required listening.<h1 id=the-secret-behind-rust-s-beautiful-error-messages>The Secret Behind Rust's Beautiful Error Messages</h1><p>If you've ever compiled Rust code, you know the feeling: an error message that doesn't just tell you what went wrong, but guides you toward the solution. Those beautifully formatted diagnostics? They're the result of over a decade of intentional design by hundreds of contributors.<p>And now, that same power is becoming available to everyone.<h2 id=from-compiler-to-ecosystem>From Compiler to Ecosystem</h2><p>Back in March 2019, <a href=https://github.com/rust-lang/rust/issues/59346 target=_blank>someone proposed</a> extracting the compiler's error formatting into a standalone crate. Enter <a href=https://github.com/rust-lang/annotate-snippets-rs target=_blank>annotate-snippets</a>, created by Zibi Braniecki (ICU4X, Firefox i18n). Today, <a href=https://rust-lang.github.io/rust-project-goals/2024h2/annotate-snippets.html target=_blank>rustc is switching to use it by default</a>, a six-year journey coming full circle.<p>As <a href=https://kobzol.github.io/rust/rustc/2025/05/16/evolution-of-rustc-errors.html target=_blank>Jakub BerÃ¡nek documented</a>, those error messages represent "continuous design, implementation, review and testing by hundreds of contributors over ten years." Every colored highlight and helpful arrow required deliberate craft.<p>Now that capability is packaged as a general-purpose library, already used by ~9,000 projects. The integration workâ€”handling rustc's complex needs, porting thousands of UI tests, fixing bugs has been meticulous, led by Scott Schafer (Muscraft).<h2 id=what-s-coming>What's Coming</h2><p>The library supports <strong>Unicode decorations</strong> for even more polished output (try <a href=https://github.com/crate-ci/typos target=_blank>typos</a> to see it in action). Once it's the standard renderer, the library can evolve independently of compiler releases, and the ecosystem gets consistent, high-quality diagnostics.<p>You might know <a href=https://github.com/zkat/miette target=_blank>miette</a>, a full diagnostic framework. annotate-snippets is different it's purely the renderer, but battle-tested by rustc itself. As <a href=https://github.com/oli-obk target=_blank>oli-obk noted</a>: "use it and get pretty diagnostics instead of rolling your own."<p>Rust could have shipped "good enough" errors. Instead, the community invested a decade perfecting them. Now that investment multiplies across every tool that adopts <a href=https://github.com/rust-lang/annotate-snippets-rs target=_blank>annotate-snippets</a>. Build something excellent once, then share it widely.<h1 id=the-great-rust-maintenance-debate-when-unmaintained-doesn-t-mean-broken>The Great Rust Maintenance Debate: When "Unmaintained" Doesn't Mean Broken</h1><p>A <a href=https://www.reddit.com/r/rust/comments/1ojb87w/frustrated_by_lack_of_maintained_crates/ target=_blank>heated Reddit discussion</a> sparked honest conversations about what "maintenance" really means. The concern? Too many crates haven't been touched in years, maintained by solo developers, while Go has corporate-backed libraries. Add FFI wrappers around C libraries, and Rust's safety benefits feel like a facade.<p>But here's the twist: the community pushes back hard. User trailing_zero_count shared <a href=https://crates.io/crates/serde_json_any_key target=_blank>serde_json_any_key</a>â€”500K downloads, no updates in 3 years, zero issues. Why update? It's <strong>done</strong>. fxhash went 8 years without changes because its hash algorithm simply didn't need updates. Safe Rust code doesn't rot like other languages.<h2 id=the-reality-is-more-complex>The Reality Is More Complex</h2><p>A <a href=https://00f.net/2025/10/17/state-of-the-rust-ecosystem/ target=_blank>comprehensive October 2025 analysis by Frank Denis</a> reveals the other side: <strong>45.2%</strong> of 200,000+ crates haven't been updated in 2+ years, and <strong>249 abandoned dependencies</strong> exist in the top 1,000 most-downloaded crates. quickcheck: unmaintained 4.8 years, 52 dependents. fxhash? Now officially <a href=https://rustsec.org/advisories/RUSTSEC-2025-0057.html target=_blank>unmaintained</a>, migrate to rustc-hash.<p>On FFI wrappers: yes, they depend on C, but battle-tested C libraries have decades of hardening. The Rust wrapper gives <em>your</em> application code, the untested part, memory safety guarantees. Even Python's popular libraries wrap C/C++. Pure Rust alternatives like <a href=https://github.com/Eugeny/russh target=_blank>russh</a> (1.5M downloads) are emerging, just not at enterprise speed.<h2 id=stone-soup-economics>Stone Soup Economics</h2><p>The uncomfortable truth: companies profit from volunteer-maintained open source while contributing little. The solution? "Fork, clone, maintain, push PR during work hours. Not for all crates, just one."<p><a href=https://corrode.dev/blog/long-term-rust-maintenance/ target=_blank>Long-term maintenance strategies</a> matter: minimize dependencies, prefer 1.0+ crates, use Dependabot, budget time for upstream contributions. Use Go where it dominates (containerization). Use Rust where it excels (parsing, systems programming, web services).<p>The debate reflects Rust's adolescence. The language is mature; the ecosystem is maturing. The question isn't whether to use Rust, but whether your organization can participate not just extract.<h1 id=mutex-showdown-when-parking-lot-beats-std-and-when-it-doesn-t>Mutex Showdown: When parking_lot Beats std (And When It Doesn't)</h1><p>Think all mutexes are created equal? A <a href=https://blog.cuongle.dev/p/inside-rusts-std-and-parking-lot-mutexes-who-win target=_blank>detailed deep-dive by Cuong Le</a> reveals the choice between <code>std::sync::Mutex</code> and <a href=https://github.com/Amanieu/parking_lot target=_blank>parking_lot</a> is more nuanced than "just use parking_lot."<p><strong>std wins</strong> by 9% in short-hold scenarios with moderate contention. <strong>parking_lot dominates</strong> elsewhere: 18.5% faster in bursty workloads, 261.6% higher throughput preventing monopolization, and 49x better fairness under heavy contention (3.67ms vs 188.73ms latency variation).<p>The starvation problem is dramatic: with one aggressive thread, std showed <strong>95.3% variation</strong> in lock acquisitionsâ€”some threads barely got the lock. parking_lot: <strong>1.9% variation</strong>. Why? std's futex uses "barging" (any thread grabs the lock), maximizing throughput but causing starvation. parking_lot implements "eventual fairness"â€”unfair for performance, but forces fair unlocks every ~0.5ms to prevent starvation.<p><strong>Use std</strong> for: low-moderate contention, brief critical sections, no dependencies, debugging panics. <strong>Use parking_lot</strong> for: fairness guarantees, monopolization risk, bursty workloads, predictable latency. Performance isn't one-dimensionalâ€”sometimes fairness matters more than raw speed.<h1 id=snippets>Snippets</h1><ul><li><a href=https://predr.ag/blog/ghosts-in-the-compilation/ target=_blank>Ghosts in the compilation: debugging cargo-semver-checks build failures that users couldn't reproduce</a><li><a href=https://kerkour.com/signal-app-rust target=_blank>How Signal uses Rust to secure the communications of millions</a><li><a href=https://blog.0xshadow.dev/posts/coding-agent-in-rust/coding-agent-in-rust-introduction/ target=_blank>Building a CLI coding agent from scratch in Rust</a><li><a href=https://blog.rust-lang.org/2025/10/30/Rust-1.91.0/ target=_blank>Rust Release 1.91.0</a></ul><hr><p>We are thrilled to have you as part of our growing community of Rust enthusiasts! If you found value in this newsletter, don't keep it to yourself â€” share it with your network and let's grow the Rust community together.<p><strong>ðŸ‘‰ Take Action Now:</strong><br><ul><li><p><strong>Share:</strong> Forward this email to share this newsletter with your colleagues and friends.</p><li><p><strong>Engage:</strong> Have thoughts or questions? Reply to this email.</p><li><p><strong>Subscribe:</strong> Not a subscriber yet? Click <a href=/signup/>here</a> to never miss an update from Rust Trends.<br><br></p></ul><p>Cheers,<br> Bob Peters<p><em>Want to sponsor Rust Trends? We reach thousands of Rust developers biweekly. <a href=mailto:contact@rust-trends.com>Get in touch!</a></em></section></article></main></div><div class=footer><br><hr><div style=font-size:x-large><a href=/signup/>Sign up for our Newsletter</a></div><br> Â© Copyright 2022-2025 Rust Trends.<br>All Rights Reserved | Powered by Rust and <a href=https://www.getzola.org/ target=_blank>Zola</a><br><br></div><script src="https://rust-trends.com/search.js?v=202602010646" defer></script>